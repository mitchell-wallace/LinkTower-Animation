---
/**
 * Promo Animation Page
 * Phase 4: Contrary motion (center down, sides up)
 */
import "@/styles/global.css";
import PromoLink from "../promo/PromoLink.astro";
import { leftColumnLinks, centerColumnLinks, rightColumnLinks, shouldShowLogo } from "../promo/data";

// Frame dimensions (3:2 aspect ratio at ~720p)
const FRAME_WIDTH = 1080;
const FRAME_HEIGHT = 720;

// Rotation configuration
const ROTATION_DEG = 30;

// Calculate scale to fill frame after rotation
const SCALE = 1.8;

// Animation configuration
const ANIMATION_DURATION = 15; // seconds per loop
---

<!DOCTYPE html>
<html lang="en" data-theme="treelink-light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinkTower Promo Animation</title>
  <style>
    /* Infinite scroll animation - scrolls 50% (one full content set) */
    @keyframes scroll-down {
      from { transform: translateY(0); }
      to { transform: translateY(-50%); }
    }
    @keyframes scroll-up {
      from { transform: translateY(-50%); }
      to { transform: translateY(0); }
    }
    .animate-scroll-down {
      animation: scroll-down var(--duration) linear infinite;
    }
    .animate-scroll-up {
      animation: scroll-up var(--duration) linear infinite;
    }
  </style>
</head>
<body class="min-h-screen bg-neutral-800 flex items-center justify-center p-8">
  
  <!-- Frame container - exact 1080x720 dimensions -->
  <div 
    id="promo-frame"
    class="relative overflow-hidden bg-gradient-to-br from-base-100 to-base-200"
    style={`width: ${FRAME_WIDTH}px; height: ${FRAME_HEIGHT}px;`}
  >
    <!-- Rotated content container -->
    <div 
      id="rotated-content"
      class="absolute"
      style={`
        width: ${FRAME_WIDTH}px;
        height: ${FRAME_HEIGHT}px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%) rotate(${ROTATION_DEG}deg) scale(${SCALE});
        transform-origin: center center;
      `}
    >
      <!-- Three column layout -->
      <div class="absolute inset-0 flex gap-2 p-3" style={`--duration: ${ANIMATION_DURATION}s;`}>
        
        <!-- Left Column - scrolls UP -->
        <div class="flex-1 overflow-hidden">
          <div class="flex flex-col gap-2 animate-scroll-up">
            {/* First set */}
            {leftColumnLinks.map((link) => (
              <PromoLink link={link} />
            ))}
            {/* Duplicate for seamless loop */}
            {leftColumnLinks.map((link) => (
              <PromoLink link={link} />
            ))}
          </div>
        </div>
        
        <!-- Center Column - scrolls DOWN -->
        <div class="flex-1 overflow-hidden">
          <div class="flex flex-col gap-2 animate-scroll-down">
            {/* First set */}
            {centerColumnLinks.map((link, index) => (
              <PromoLink link={link} showLogo={shouldShowLogo(index)} />
            ))}
            {/* Duplicate for seamless loop */}
            {centerColumnLinks.map((link, index) => (
              <PromoLink link={link} showLogo={shouldShowLogo(index)} />
            ))}
          </div>
        </div>
        
        <!-- Right Column - scrolls UP -->
        <div class="flex-1 overflow-hidden">
          <div class="flex flex-col gap-2 animate-scroll-up">
            {/* First set */}
            {rightColumnLinks.map((link) => (
              <PromoLink link={link} />
            ))}
            {/* Duplicate for seamless loop */}
            {rightColumnLinks.map((link) => (
              <PromoLink link={link} />
            ))}
          </div>
        </div>
        
      </div>
    </div>
  </div>
  
  <!-- Debug info -->
  <div class="fixed bottom-4 left-4 bg-black/80 text-white text-sm px-4 py-2 rounded-lg">
    Phase 4: Contrary Motion | Rotation {ROTATION_DEG}Â° | Scale: {SCALE} | Duration: {ANIMATION_DURATION}s
  </div>
  
</body>
</html>
